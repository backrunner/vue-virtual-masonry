(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vue-virtual-masonry"]=e():t["vue-virtual-masonry"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"24fb":function(t,e,n){"use strict";function i(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"===typeof btoa){var r=o(i),s=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(s).concat([r]).join("\n")}return[n].join("\n")}function o(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(n," */")}t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=i(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"===typeof t&&(t=[[null,t,""]]);var o={};if(i)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);i&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},"3c53":function(t,e,n){var i=n("772f");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("499e").default;o("569ddf9a",i,!0,{sourceMap:!1,shadowMode:!1})},"499e":function(t,e,n){"use strict";function i(t,e){for(var n=[],i={},o=0;o<e.length;o++){var r=e[o],s=r[0],a=r[1],c=r[2],u=r[3],h={id:t+":"+o,css:a,media:c,sourceMap:u};i[s]?i[s].parts.push(h):n.push(i[s]={id:s,parts:[h]})}return n}n.r(e),n.d(e,"default",(function(){return p}));var o="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},s=o&&(document.head||document.getElementsByTagName("head")[0]),a=null,c=0,u=!1,h=function(){},l=null,d="data-vue-ssr-id",f="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(t,e,n,o){u=n,l=o||{};var s=i(t,e);return m(s),function(e){for(var n=[],o=0;o<s.length;o++){var a=s[o],c=r[a.id];c.refs--,n.push(c)}e?(s=i(t,e),m(s)):s=[];for(o=0;o<n.length;o++){c=n[o];if(0===c.refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete r[c.id]}}}}function m(t){for(var e=0;e<t.length;e++){var n=t[e],i=r[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(v(n.parts[o]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(v(n.parts[o]));r[n.id]={id:n.id,refs:1,parts:s}}}}function g(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function v(t){var e,n,i=document.querySelector("style["+d+'~="'+t.id+'"]');if(i){if(u)return h;i.parentNode.removeChild(i)}if(f){var o=c++;i=a||(a=g()),e=S.bind(null,i,o,!1),n=S.bind(null,i,o,!0)}else i=g(),e=b.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}var y=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}();function S(t,e,n,i){var o=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=y(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function b(t,e){var n=e.css,i=e.media,o=e.sourceMap;if(i&&t.setAttribute("media",i),l.ssrId&&t.setAttribute(d,e.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{while(t.firstChild)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},"772f":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".masonry-container[data-v-3a4e140a]{position:relative;-webkit-overflow-scrolling:touch}.masonry-container .masonry-item[data-v-3a4e140a]{position:absolute;left:0;top:0}",""]),t.exports=e},8875:function(t,e,n){var i,o,r;(function(n,s){o=[],i=s,r="function"===typeof i?i.apply(e,o):i,void 0===r||(t.exports=r)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(f){var n,i,o,r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,s=/@([^@]*):(\d+):(\d+)\s*$/gi,a=r.exec(f.stack)||s.exec(f.stack),c=a&&a[1]||!1,u=a&&a[2]||!1,h=document.location.href.replace(document.location.hash,""),l=document.getElementsByTagName("script");c===h&&(n=document.documentElement.outerHTML,i=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=n.replace(i,"$1").trim());for(var d=0;d<l.length;d++){if("interactive"===l[d].readyState)return l[d];if(l[d].src===c)return l[d];if(c===h&&l[d].innerHTML&&l[d].innerHTML.trim()===o)return l[d]}return null}}return t}))},a32b:function(t,e,n){"use strict";n("3c53")},fb15:function(t,e,n){"use strict";if(n.r(e),"undefined"!==typeof window){var i=window.document.currentScript,o=n("8875");i=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var r=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(n.p=r[1])}var s={additionalDistance:500},a={options:s},c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"masonry-container",style:t.containerStyle},[t.displayItems.length?t._l(t.displayItems,(function(e,i){return n("div",{key:t.getKey(e,i),staticClass:"masonry-item",style:t.getItemStyles(e._masonryIndex)},[t._t("default",null,{data:e,position:Object.assign({},t.positionMap[e._masonryIndex],{colWidth:t.colWidth})})],2)})):t._e()],2)},u=[],h=600,l={props:{itemHeightGetter:{type:Function,required:!0},items:{type:Array,required:!0},colWidth:{type:Number,required:!0},col:{type:Number,default:0},gap:{type:Number,default:16},fit:{type:Boolean,default:!1},rowsPerSection:{type:Number,default:3},groupSize:{type:Number,default:h},recycleNode:{type:Boolean,default:!1}},data:function(){return{positionMap:{},widthStore:{},heightStore:{},group:{},inGroup:{},sections:[{}],sectionsIdx:0,displayItems:[],storedItemsLength:0,currentSectionCount:0,containerWidth:0,maxHeight:0,screenWidth:document.documentElement.clientWidth,screenHeight:document.documentElement.clientHeight,scrollTop:document.documentElement.scrollTop,containerOffset:0,additionalDistance:a.options.additionalDistance}},computed:{columns:function(){return this.col?this.col:Math.floor((this.containerWidth+this.gap)/(this.colWidth+this.gap))},containerFitWidth:function(){return this.col*this.colWidth+(this.col-1)*this.gap},containerStyle:function(){var t=this.fit&&this.col?"".concat(this.containerFitWidth,"px"):null,e="".concat(this.maxHeight||0,"px");return{width:t,height:e}}},watch:{items:"itemsChanged",columns:"columnsChanged",colWidth:"colWidthChanged",screenWidth:function(t){var e=this;this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((function(){e.screenWidthChanged(t)}),300)}},created:function(){this.resetWidthStore(),this.resetHeightStore(),this.resetPositionMap(),window.addEventListener("resize",this.handleWindowResize),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})},mounted:function(){this.containerWidth=this.getContainerWidth(),this.containerOffset=this.getContainerOffset(),this.renderMasonry()},updated:function(){this.containerWidth=this.getContainerWidth()},beforeDestroy:function(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("scroll",this.handleWindowScroll)},methods:{getKey:function(t,e){return this.recycleNode?e:t._masonryIndex},getContainerWidth:function(){return this.fit&&this.col?this.containerFitWidth:this.$refs.container?this.$refs.container.offsetWidth:0},getContainerOffset:function(){if(this.$refs.container){var t=document.documentElement.getBoundingClientRect(),e=this.$refs.container.getBoundingClientRect();return e.top-t.top}},getItemStyles:function(t){return{width:"".concat(this.colWidth,"px"),height:"".concat(this.positionMap[t].height,"px"),transform:"translateX(".concat(this.positionMap[t].left,"px) translateY(").concat(this.positionMap[t].top,"px)")}},itemsChanged:function(){this.items.length<=this.storedItemsLength?this.renderMasonry():(this.computePosition(),this.setMaxHeight(),this.setDisplay()),this.storedItemsLength=this.items.length},columnsChanged:function(){this.renderMasonry()},colWidthChanged:function(){this.renderMasonry()},screenWidthChanged:function(){this.containerWidth=this.getContainerWidth()},renderMasonry:function(){this.resetGroup(),this.resetSections(),this.resetWidthStore(),this.resetHeightStore(),this.resetPositionMap(),this.setMaxHeight(),this.setDisplay()},setDisplay:function(){for(var t=this,e=this.rowsPerSection*this.columns,n=this.scrollTop-this.additionalDistance,i=this.scrollTop+this.screenHeight+this.additionalDistance,o=Math.floor(n/this.groupSize),r=Math.floor(i/this.groupSize),s=[],a={},c=o;c<=r;c++)if(this.group[c])for(var u=0;u<this.group[c].length;u++){var h=this.group[c][u];a[h]||(s=s.concat(this.items.slice(h*e,(h+1)*e)),a[h]=!0)}window.requestAnimationFrame?window.requestAnimationFrame((function(){t.displayItems=s,t.$forceUpdate()})):(this.displayItems=s,this.$forceUpdate())},resetWidthStore:function(){this.widthStore={};for(var t=0;t<this.columns;t++)this.widthStore[t]=(this.colWidth+this.gap)*t},resetHeightStore:function(){this.heightStore={};for(var t=0;t<this.columns;t++)this.heightStore[t]=0},resetPositionMap:function(){this.displayItems=[],this.positionMap={},this.computePosition()},resetGroup:function(){this.group={},this.inGroup={}},resetSections:function(){this.sections=[{}],this.currentSectionCount=0},computePosition:function(){var t=this;if(this.widthStore&&this.heightStore&&this.columns){var e=this.columns*this.rowsPerSection;this.items.forEach((function(n,i){var o=i;if(n._masonryIndex=i,!t.positionMap[o]){t.$set(t.positionMap,o,{});var r,s,a,c=t.itemHeightGetter(n);if(t.$set(t.positionMap[o],"height",c),i<t.columns)r=t.widthStore[i],s=0,a=i;else{var u=t.getMinHeightCol();r=t.widthStore[u],s=t.heightStore[u],a=u}t.currentSectionCount<e?t.currentSectionCount+=1:(t.currentSectionCount=1,t.sections.push({})),t.$set(t.positionMap[o],"left",r),t.$set(t.positionMap[o],"top",s),t.heightStore[a]+=c+t.gap;var h=t.sections.length-1,l=t.sections[h],d=l.head,f=l.tail;("undefined"===typeof d||s<d)&&(t.sections[h].head=s);var p=s+c;("undefined"===typeof f||p>f)&&(t.sections[h].tail=p)}})),this.sections.forEach((function(e,n){if(!t.inGroup[n]){var i=e.head,o=e.tail;if("undefined"!==typeof i&&"undefined"!==typeof o){for(var r=Math.floor(i/t.groupSize),s=Math.floor(o/t.groupSize),a=r;a<=s;a++)t.group[a]||(t.group[a]=[]),t.group[a].push(n);t.inGroup[n]=!0}}}))}},getMinHeightCol:function(){for(var t=Number.MAX_VALUE,e=0,n=0;n<this.columns;n++)this.heightStore[n]<t&&(t=this.heightStore[n],e=n);return e},getMaxHeight:function(){for(var t=0,e=0;e<this.columns;e++)this.heightStore[e]>t&&(t=this.heightStore[e]);return t},setMaxHeight:function(){this.maxHeight=this.getMaxHeight()},handleWindowResize:function(){this.screenWidth=document.documentElement.clientWidth,this.screenHeight=document.documentElement.clientHeight,this.containerOffset=this.getContainerOffset()},handleWindowScroll:function(){this.handleScroll()},handleScroll:function(){var t=this;this.scrollTimer&&(clearTimeout(this.scrollTimer),this.scrollTimer=null),this.scrollTimer=setTimeout((function(){t.handleScroll.apply(!0)}),200),this.lastScroll&&Date.now()-this.lastScroll<200||(this.lastScroll=Date.now(),this.containerOffset=this.getContainerOffset(),this.scrollTop=document.documentElement.scrollTop-this.containerOffset,this.setDisplay(),clearTimeout(this.scrollTimer),this.scrollTimer=null)}}},d=l;n("a32b");function f(t,e,n,i,o,r,s,a){var c,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=c):o&&(c=a?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var h=u.render;u.render=function(t,e){return c.call(e),h(t,e)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,c):[c]}return{exports:t,options:u}}var p=f(d,c,u,!1,null,"3a4e140a",null),m=p.exports,g={install:function(t,e){e&&Object.assign(a.options,e),t.component("VirtualMasonry",m)}},v=g;e["default"]=v}})}));
//# sourceMappingURL=vue-virtual-masonry.umd.min.js.map